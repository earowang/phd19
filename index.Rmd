---
title: "Tidy tools for <br> supporting fluent workflow <br> in temporal data analysis"
type: "seminar"
author: "Earo Wang"
date: ""
output:
  xaringan::moon_reader:
    css: ["libs/remark.css"]
    lib_dir: libs
    nature:
      ratio: 16:9
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

```{r initial, echo = FALSE, cache = FALSE, results = 'hide'}
library(knitr)
options(htmltools.dir.version = FALSE, tibble.width = 60, tibble.print_min = 6)
opts_chunk$set(
  echo = FALSE, warning = FALSE, message = FALSE, comment = "#>",
  fig.path = 'figure/', cache.path = 'cache/', fig.align = 'center', 
  fig.width = 12, fig.show = 'hold', fig.height = 8.5, 
  cache = TRUE, external = TRUE, dev = 'png', dpi = 300
)
read_chunk('R/theme.R')
```

```{r theme-remark}
```

class: inverse middle

# What is (temporal) data analysis?

---

class: middle

> Data analysis is a process of .orange[inspecting], .orange[cleansing], .orange[transforming], and .orange[modeling] data with the goal of discovering useful information, informing conclusions, and supporting decision-making. ([Wikipedia](https://en.wikipedia.org/wiki/Data_analysis))

---

class: inverse middle

# What are .barcode[messy] tools?

---

class: middle

background-image: url(img/model-forecast.png)
background-size: 75%

.pull-left[
]
.pull-right[
.rotate-45[
.alert[
.center[
**2018** <br>
**ETC3550: Applied forecasting**
]
]
]
]

???

* verbose but distracting
* focus on code but not the idea

---

class: middle

background-image: url(img/model-forecast.png)
background-size: 75%

.pull-left[
]
.pull-right[
.card[
`r emo::ji("thinking")` Should all forecasting students be programmers?
]
]

---

class: inverse middle

# What are ~~messy~~ tidy tools?

---

class: middle

background-image: url(img/model-fable.png)
background-size: 75%

.pull-left[
]
.pull-right[
.rotate-45[
.alert[
.center[
**2019** <br>
**ETC3550: Applied forecasting**
]
]
]
]

???

* focus on the idea not the code
* focus on the data and expressiveness

---

class: middle

```r
marathon %>% 
  model(
    linear = TSLM(Minutes ~ trend()),
    exponential = TSLM(log(Minutes) ~ trend()),
    piecewise = TSLM(Minutes ~ trend(knots = c(1940, 1980)))
  ) %>% 
  forecast(h = 10)
```

1. Tidy tools are .orange[accessible].
2. Tidy tools are .orange[expressive].
3. Tidy tools are .orange[pipeable].

---

class: inverse middle

# What is fluent workflow?

---

.left-column[
.center[
## Welcome to
<img src="https://github.com/rstudio/hex-stickers/blob/master/PNG/tidyverse.png?raw=true", height = "200px">
]
]
.right-column[
<br>
<br>
<img src="img/tidy-model.png", width = "100%">
]

--

### .center[Behind fluent workflow is tidy data.]

---

.left-column[
.center[
## Welcome to <br> .red[time series analysis]
]
]
.right-column[
<br>
<br>
<img src="img/ts-model.png", width = "100%">
]

--

### .center[WAT!`r emo::ji("scream")`]

---

.left-column[
## WAT!`r emo::ji("scream")`
]
.right-column[
```r
# Put them into a big matrix
ltraffics <- list(as.bf.cpu, as.bf.busy, as.bf.memory, as.bf.page,
                  as.gq.cpu, as.gq.busy, as.gq.memory, as.gq.page,
                  as.ir.cpu, as.ir.busy, as.ir.memory, as.ir.page,
                  ...
                  hs.gq.cpu, hs.gq.busy, hs.gq.memory, hs.gq.page,
                  hs.ir.cpu, hs.ir.busy, hs.ir.memory, hs.ir.page,
                  hs.ne.cpu, hs.ne.busy, hs.ne.memory, hs.ne.page,
                  hs.sg.cpu, hs.sg.busy, hs.sg.memory, hs.sg.page)
indcols <- sapply(ltraffics, ncol)
cs <- cumsum(c(1, indcols))
totalcols <- sum(indcols)
traffics <- matrix(, nrow = 719, ncol = totalcols)
for (i in 1L:length(ltraffics)) {
  idx <- cs[i]:(cs[i + 1] - 1L)
  traffics[, idx] <- as.matrix(ltraffics[[i]][1:719, ])
}
```
]

---

background-image: url(img/tsibble-model.png)
background-size: 70%
background-position: 91% 38%

.animated.slower.rollIn[
.pipeline[<img src="img/tsibble.png", height = "150px">]
]

---

class: center middle

<img src="img/tsibble.png", height = "320px">

## The future is around the corner.

---

Tsibble is aimed at

1. a data representation for tidy temporal data
2. a domain specific language in R for wrangling temporal data

---
